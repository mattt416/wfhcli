#!/usr/bin/env ruby

require 'thor'
require 'wfhcli'

module Wfh
  class Cli < Thor
    # NOTE: We override Thor's initialize method, need to look into this a bit
    #       more.
    def initialize(*args)
      @wfh = Wfh::Lib.new
      super(*args)
    end

    desc "categories", "List categories"
    def categories
      @wfh.list_categories
    end

    desc "companies", "List companies"
    option :page
    def companies
      if options[:page]
        @wfh.list_companies(options[:page])
      else
        @wfh.list_companies
      end
    end

    desc "company ID", "Show company with ID"
    def company(id)
      @wfh.show_company(id)
    end

    desc "jobs", "List jobs"
    option :category
    def jobs
      if options[:category]
        @wfh.list_jobs(options[:category])
      else
        @wfh.list_jobs
      end
    end

    desc "job ID", "Show job with ID"
    def job(id)
      @wfh.show_job(id)
    end
  end
end

Wfh::Cli.start(ARGV)
