#!/usr/bin/env ruby

require 'thor'
require 'wfhcli'

class WfhCli < Thor
  def initialize(*args)
    @wfh = WfhLib.new
    super
  end

  desc "categories", "List categories"
  def categories
    @wfh.list_categories
  end

  desc "companies", "List companies"
  option :page
  def companies
    @wfh.list_companies(options[:page])
  end

  desc "company ID", "Show company with ID"
  def company(id)
    @wfh.show_company(id)
  end

  desc "jobs", "List jobs"
  option :category
  option :page
  def jobs
    if options[:category]
      @wfh.list_jobs(options[:page], options[:category])
    else
      @wfh.list_jobs(options[:page])
    end
  end

  desc "job ID", "Show job with ID"
  def job(id)
    @wfh.show_job(id)
  end
end

WfhCli.start(ARGV)
